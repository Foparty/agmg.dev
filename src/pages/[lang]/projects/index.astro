---
import Layout from '@layouts/Layout.astro';
import ProjectContainer from '@components/ProjectContainer.astro';
import { getLangFromUrl, useTranslations } from 'src/i18n/utils';
import { languages } from 'src/i18n/ui';
import { getCollection } from 'astro:content';

import ArrowDown from '@icons/ArrowDown.astro';

export const getStaticPaths = () =>
	Object.keys(languages).map((lang) => ({ params: { lang } }));

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const allProjects = await getCollection('projects');
const langProjects = allProjects.filter((post) =>
	post.id.startsWith(`${lang}`)
);
---

<Layout title='projects site'>
	<section class='projects'>
		<div class='projectsContainer'>
			{langProjects.map((project) => <ProjectContainer project={project} />)}
		</div>
	</section>
</Layout>

<style>
	.projects {
		border: 1px solid red;
		width: 100%;
		min-height: calc(100% - var(--navHeight));
		display: flex;
		justify-content: center;
		align-items: center;
	}
	.projectsContainer {
		border: 1px solid red;
		position: relative;
		border-radius: 0.8rem;
		box-shadow: 1px 2px 5px 0px rgba(0, 0, 0, 0.8);
		padding: 1rem;
		width: 75%;
		aspect-ratio: 9 / 16;
		height: auto;
		overflow-y: scroll;
		scroll-snap-type: y mandatory;
		background: repeating-linear-gradient(
			45deg,
			#0a0c0d 0,
			#0a0c0d 10px,
			#020202 20px,
			#0a0c0d 30px
		);
		-ms-overflow-style: none; /* IE and Edge */
		scrollbar-width: none;
		@media (width > 680px) {
			padding: 3rem;
			aspect-ratio: 5/ 3;
		}
		&::-webkit-scrollbar {
			display: none;
		}
	}
</style>
